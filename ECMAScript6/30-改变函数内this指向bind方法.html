<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button>点击</button>
    <script>
      // 改变函数内this指向 js 提供了三种方法 call() apply() bind()

      // 3. bind() 绑定/捆绑的意思
      // bind 不会调用原来的函数 可以改变函数内的this指向
      // 返回的是原函数改变this之后产生的新函数
      // 有的函数不需要立即调用又想改变这个函数内部的this指向就用bind
      var o = {
        name: "object",
      };
      function fn(a, b) {
        console.log(this);
        console.log(a + b); // 'red'
      }
      var f = fn.bind(o, 1, 2);
      f();

      // 一个按钮点击之后，禁用按钮，3秒之后开启这个按钮
      var btn = document.querySelector("button");
      btn.onclick = function () {
        this.disabled = true; // this 指向的是 btn 这个按钮
        // var that = this;
        setTimeout(
          function () {
            // that.disabled = false; // 定时器函数里面的this 指向的是window
            this.disabled = false; // 定时器函数里面的this 指向的是btn
          }.bind(this), // 这个this 指向的是btn 这个对象
          3000
        );
      };
    </script>
  </body>
</html>
